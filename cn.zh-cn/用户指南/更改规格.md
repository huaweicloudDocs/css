# 更改规格<a name="css_01_0074"></a>

当创建的集群规格不能满足业务需求时，您可以通过更改规格，对已经创建的集群规格进行修改，以提高存储和使用效率。您可以根据业务需求，对集群节点进行缩减，以使集群拥有更优的存储，降低运维成本。

## 扩容集群<a name="section687651216149"></a>

1.  登录云搜索服务管理控制台。
2.  单击“集群管理“，进入集群列表页面，选择需要更改规格的集群，在其“操作“列中单击“更多\>更改规格“。

    **图 1**  更改规格<a name="fig113478345195"></a>  
    ![](figures/更改规格.png "更改规格")

3.  在“更改集群规格”页面，设置所需“修改后的节点数量“、“节点存储容量“。

    如果集群未启用Master节点或Client节点，此时更改集群节点数量或节点存储容量，请至少增加1个节点，且节点数量最大为32个节点。

    如果此集群已启用Master节点或Client节点，您还可以更改Master节点数量和Client节点数量或节点存储容量。请至少增加1个节点，且集群节点数量最大为200个节点，Master节点数量最大为9个节点，Client节点数量最大为32个节点。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >-   如果只新增节点数量，则新增节点的“节点规格“、“节点存储容量“与创建集群时相同。
    >-   如果既新增节点数量，又增加节点存储容量，则新增节点的“节点规格“与创建集群时相同，集群的所有节点的存储容量将统一更改为变更后的节点存储容量。
    >-   如果只更改“节点存储容量“，则集群的所有节点的存储容量将统一更改为变更后的节点存储容量。
    >-   “节点存储容量“参数最多只能修改6次。
    >-   当集群扩容时，业务不会中断。

    **图 2**  更改集群规格<a name="fig273616367146"></a>  
    ![](figures/更改集群规格.png "更改集群规格")

4.  单击“立即创建“。
5.  在“集群详情“页面，确认更改的规格后，单击“提交申请“。
6.  单击“返回集群列表“跳转到集群管理页面。“任务状态“列中显示为“扩容“，表示集群正在扩容。当集群状态变为“可用”，则表示规格更改成功。

## 缩容集群<a name="section11279161911146"></a>

1.  登录云搜索服务管理控制台。
2.  单击“集群管理“，进入集群列表页面，选择需要更改规格的集群，在其“操作“列中单击“更多\>更改规格“。
3.  在“更改集群规格”页面，设置所需“修改后的节点数量“。

    >![](public_sys-resources/icon-note.gif) **说明：** 
    >-   每次缩容节点数要小于集群节点的一半。
    >-   缩容之后的节点数要大于索引副本数。
    >-   缩容之后的磁盘使用量要小于80%。
    >-   当集群缩容时，业务不会中断。
    >-   缩容时需要将要下线节点的数据迁移到其他节点，这个数据迁移的超时时间为5小时，如果超过5小时数据还未迁移完，那么缩容将会失败。集群数据量较大的情况下，建议可以分多次缩容。

4.  单击“立即创建“。
5.  在“集群详情“页面，确认更改的规格后，单击“提交申请“。
6.  单击“返回集群列表“跳转到集群管理页面。“任务状态“列中显示为“缩容中“，表示集群正在缩容。当集群状态变为“可用”，则表示规格更改成功。

## 更改集群节点规格<a name="section1406185413613"></a>

>![](public_sys-resources/icon-note.gif) **说明：** 
>-   只支持拥有3个及以上节点的集群更改节点规格。
>-   只支持集群节点规格向大更改。
>-   此功能上线之前创建的集群不支持更改节点规格。
>-   更改规格过程中，Kibana不可用。
>-   变更节点规格不能与“修改后的节点数量”和“节点存储容量”同时操作。
>-   如果数据量比较大的情况下，更改节点规格耗时会比较长。
>-   更改节点规格时，为了不中断业务，业务数据必须都有副本。

1.  登录云搜索服务管理控制台。
2.  单击“集群管理“，进入集群列表页面，选择需要更改规格的集群，在其“操作“列中单击“更多\>更改规格“。
3.  在“更改集群规格”页面，设置所需的“变更后节点规格“。
4.  单击“立即创建“。
5.  在“集群详情“页面，确认更改的规格后，单击“提交申请“。
6.  单击“返回集群列表“跳转到集群管理页面。“任务状态“列中显示为“规格修改“，表示集群正在更改规格。当集群状态变为“可用”，则表示规格更改成功。

